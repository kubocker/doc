---
title: "æœˆé–“ãƒŠãƒ³ãƒãƒ¼ã‚º3å½“é¸ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦CSVåŒ–"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python"]
published: false
---


ãƒŠãƒ³ãƒãƒ¼ã‚º3ã®å½“é¸ç•ªå·ãªã©é–²è¦§ã§ãã‚‹ã‚µã‚¤ãƒˆã¯æ•°å¤šãã‚ã‚‹ãŒ
ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã‚„ã™ã„ã‚µã‚¤ãƒˆã¯[å®ãã˜ã®æ¥½å¤©ã‚µã‚¤ãƒˆ](https://takarakuji.rakuten.co.jp/)ã§ã¯ãªã„ã‹ã¨è€ƒãˆã¦ã„ã‚‹

ãƒŠãƒ³ãƒãƒ¼ã‚º3ã®å½“é¸ç•ªå·ãªã©é–²è¦§ã§ãã‚‹ã‚µã‚¤ãƒˆã¯æ•°å¤šãã‚ã‚‹ãŒ
ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã‚„ã™ã„ã‚µã‚¤ãƒˆã¯[å®ãã˜ã®æ¥½å¤©ã‚µã‚¤ãƒˆ](https://takarakuji.rakuten.co.jp/)ã§ã¯ãªã„ã‹ã¨è€ƒãˆã¦ã„ã‚‹

ãƒŠãƒ³ãƒãƒ¼ã‚º4ã§ã‚‚ãƒŠãƒ³ãƒãƒ¼ã‚º3ã§ã‚‚åŒã˜ã§ã‚ã‚‹

## ç’°å¢ƒ

python 3.8

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
pip install beautifulsoup4
pip install pandas
pip install requests
```

## æ‰‹é †

- è¨­å®š

```python
MONTH = '202102'
URL = 'https://takarakuji.rakuten.co.jp/backnumber/numbers3/{0}/'.format(MONTH)
CSV_FILE = '{èµ·ããŸã„CSVãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹}' + 'numbers3/{0}.csv'.format(MONTH)
```

- ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆæƒ…å ±

```python
output = open(CSV_FILE, mode='w')
```

- ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°

```python
scraping = BeautifulSoup(requests.get(URL).content,'html.parser'
```

- HTMLã‚¿ã‚°

```python
tag_table = scraping.find_all('table')
```

- ãƒ†ãƒ¼ãƒ–ãƒ«å„ãƒ‡ãƒ¼ã‚¿å–å¾—

```python
data = []
for _i in range(0, len(tag_table)):
    # å›å·
    num = [f for f in tag_table[_i].find_all('th')[1]]
    # çµæœ
    info = [d.text for d in tag_table[_i].find_all('td')]
    # ãƒ‡ãƒ¼ã‚¿ã¸
    data.append(num + info
```

- CSVã¸æŒ¿å…¥

```python
for _row in data:
    writer = csv.writer(output)
    writer.writerow(_row)
```

ã¿ãšã»éŠ€è¡Œå®ãã˜ã®çµæœãŒå¤§ä½“19æ™‚ã”ã‚ã«ã¯æ›´æ–°ã•ã‚Œã‚‹ã®ã§æ¥½å¤©å®ãã˜ã‚µã‚¤ãƒˆã§ã¯20æ™‚ã”ã‚ã«æ›´æ–°ã•ã‚Œã‚‹ã€‚20æ™‚ä»¥é™ã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§æœ€æ–°ã‚’å–å¾—ã§ãã‚‹ã¯ãšã§ã‚ã‚‹ã€‚
