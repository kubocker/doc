---
title: "æœˆé–“ãƒŠãƒ³ãƒãƒ¼ã‚º3å½“é¸ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦CSVåŒ–"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["python"]
published: false
---

æ¥½å¤©ã‚µã‚¤ãƒˆ



python


## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—




```
from bs4 import BeautifulSoup
import pandas as pd
import requests
from datetime import datetime
import time
import csv

# æŒ‡å®š
MONTH = '202103'
URL = 'https://takarakuji.rakuten.co.jp/backnumber/numbers3/{0}/'.format(MONTH)
CSV_FILE = '../assets/numbers3/{0}.csv'.format(MONTH)

# ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆæƒ…å ±
output = open(CSV_FILE, mode='w')

# ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
scraping = BeautifulSoup(requests.get(URL).content,'html.parser')

# HTMLã‚¿ã‚°
tag_table = scraping.find_all('table')

# æœˆé–“å½“é¸ç•ªå·ãªã©
# ãƒ†ãƒ¼ãƒ–ãƒ«å„ãƒ‡ãƒ¼ã‚¿å–å¾—
data = []
for _i in range(0, len(tag_table)):
    # å›å·
    num = [f for f in tag_table[_i].find_all('th')[1]]
    # çµæœ
    info = [d.text for d in tag_table[_i].find_all('td')]
    # ãƒ‡ãƒ¼ã‚¿ã¸
    data.append(num + info)

# CSVã¸æŒ¿å…¥
for _j in data:
    writer = csv.writer(output)
    writer.writerow(_j)

print('{0} end'.format(MONTH))
```
